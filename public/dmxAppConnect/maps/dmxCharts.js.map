{"version":3,"sources":["components/chart.js"],"names":["dmx","Component","attributes","width","type","Number","default","height","responsive","Boolean","String","colors","Array","legend","data","labels","nogrid","points","smooth","thickness","dashed","stacked","multicolor","cutout","noanimation","fullbar","colors1","colors2","colors3","colors4","colors5","colors6","colors7","colors8","colors9","render","node","this","$node","document","createElement","setAttribute","props","id","name","dom","replace","datasets","getDatasets","update","that","chartType","options","layout","padding","display","tooltips","callbacks","label","tooltipItem","dataset","datasetIndex","tooltipExpression","parse","DataScope","$label","$value","index","value","isArray","slice","yLabel","animation","duration","hover","animationDuration","position","scales","xAxes","gridLines","ticks","callback","values","$index","yAxes","beginAtZero","forEach","i","color","Object","assign","fill","lineTension","backgroundColor","Color","alpha","rgbaString","borderWidth","borderColor","borderDash","pointStyle","pointBackgroundColor","pointBorderColor","pointBorderWidth","pointHitRadius","pointRadius","pointHoverRadius","map","barPercentage","categoryPercentage","scale","cutoutPercentage","JSON","stringify","clone","getData","chart","destroy","Chart","needUpdate","length","prop","hasAttribute","push","getAttribute","dataExpression","items","repeatItems","getLabels"],"mappings":"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","file":"../dmxCharts/dmxCharts.js","sourcesContent":["dmx.Component('chart', {\r\n\r\n    attributes: {\r\n        width: {\r\n            type: Number,\r\n            default: 800\r\n        },\r\n\r\n        height: {\r\n            type: Number,\r\n            default: 600\r\n        },\r\n\r\n        responsive: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n\r\n        type: {\r\n            type: String,\r\n            default: 'line' // line/area/bar/horizontalBar/pie/doughnut/radar/polarArea\r\n        },\r\n\r\n        colors: {\r\n            type: [String, Array],\r\n            default: 'default'\r\n        },\r\n\r\n        legend: {\r\n            type: String,\r\n            default: ''\r\n        },\r\n\r\n        data: {\r\n            type: Array,\r\n            default: []\r\n        },\r\n\r\n        labels: {\r\n            type: String,\r\n            default: ''\r\n        },\r\n\r\n        nogrid: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n\r\n        points: { // line/area/radar\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n\r\n        'point-style': { // line/area/radar\r\n            type: String,\r\n            default: 'circle' //'circle','cross','crossRot','dash','line','rect','rectRounded','rectRot','star','triangle'\r\n        },\r\n\r\n        'point-size': { // line/area/radar\r\n            type: String,\r\n            default: 3\r\n        },\r\n\r\n        smooth: { // line/area/radar (smooth lines)\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n\r\n        thickness: { // all\r\n            type: Number,\r\n            default: 1\r\n        },\r\n\r\n        dashed: { // line/area/radar\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n\r\n        stacked: { // line/area/bar/horizontalBar\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n\r\n        multicolor: { // bar/horizontalBar\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n\r\n        cutout: { // doughnut\r\n            type: Number,\r\n            default: 50 // percent\r\n        },\r\n\r\n        noanimation: { // all\r\n            type: Boolean,\r\n            default: false // disable animations\r\n        },\r\n\r\n        fullbar: { // bar/horizontalBar\r\n            type: Boolean,\r\n            default: false // make bars full size\r\n        },\r\n\r\n        'label-x': {\r\n            type: String,\r\n            default: '$value'\r\n        },\r\n\r\n        'label-y': {\r\n            type: String,\r\n            default: '$value'\r\n        }\r\n    },\r\n\r\n    colors: {\r\n        default: ['#1c9f8d', '#d94712', '#2d81b9', '#1aa042', '#ad1999', '#d89515', '#d83148', '#7e2dad', '#828280', '#ad312f', '#1c9f8d', '#d94712', '#2d81b9', '#1aa042', '#ad1999', '#d89515', '#d83148', '#7e2dad', '#828280', '#ad312f'],\r\n        colors1: ['#5DA5DA', '#FAA43A', '#60BD68', '#F17CB0', '#B2912F', '#B276B2', '#DECF3F', '#F15854', '#4D4D4D', '#5DA5DA', '#FAA43A', '#60BD68', '#F17CB0', '#B2912F', '#B276B2', '#DECF3F', '#F15854', '#4D4D4D'],\r\n        colors2: ['#5cbae6', '#b6d957', '#fac364', '#d998cb', '#f2d249', '#93b9c6', '#ccc5a8', '#52bacc', '#98aafb', '#5cbae6', '#b6d957', '#fac364', '#d998cb', '#f2d249', '#93b9c6', '#ccc5a8', '#52bacc', '#98aafb'],\r\n        colors3: ['#3678b3', '#f47d0d', '#479f2f', '#ca2227', '#9068bc', '#87564b', '#da77c1' ,'#7f7f7f' ,'#bbbc26' ,'#4bbfcf', '#3678b3', '#f47d0d', '#479f2f', '#ca2227', '#9068bc', '#87564b', '#da77c1' ,'#7f7f7f' ,'#bbbc26' ,'#4bbfcf'],\r\n        colors4: ['#b1c7e8', '#f8b978', '#a2df8b', '#f69795', '#c3b0d5', '#bf9b94', '#f1b5d2' ,'#c7c7c7' ,'#dbda8e' ,'#a6dae5', '#b1c7e8', '#f8b978', '#a2df8b', '#f69795', '#c3b0d5', '#bf9b94', '#f1b5d2' ,'#c7c7c7' ,'#dbda8e' ,'#a6dae5'],\r\n        colors5: ['#3a3d79', '#66793a', '#886c32', '#7e3c39', '#764273', '#4383bd', '#db520a', '#4ba355', '#746cb0', '#636363', '#3a3d79', '#66793a', '#886c32', '#7e3c39', '#764273', '#4383bd', '#db520a', '#4ba355', '#746cb0', '#636363'],\r\n        colors6: ['#5356a2', '#8ea153', '#b99d3b', '#a5484a', '#9e5293', '#76afd6', '#f38b3c', '#80c377', '#9e9ac8', '#969696', '#5356a2', '#8ea153', '#b99d3b', '#a5484a', '#9e5293', '#76afd6', '#f38b3c', '#80c377', '#9e9ac8', '#969696'],\r\n        colors7: ['#6c70ce', '#b8ce6c', '#e2b853', '#cc606b', '#c66ebc', '#a4cae1', '#f5ac6b', '#a8d99b', '#bcbddc', '#bdbdbd', '#6c70ce', '#b8ce6c', '#e2b853', '#cc606b', '#c66ebc', '#a4cae1', '#f5ac6b', '#a8d99b', '#bcbddc', '#bdbdbd'],\r\n        colors8: ['#9c9fde', '#cfda9c', '#e4ca94', '#df959b', '#d89ed5', '#c9dbef', '#f8cfa2', '#cbe9c0', '#dadaeb', '#d9d9d9', '#9c9fde', '#cfda9c', '#e4ca94', '#df959b', '#d89ed5', '#c9dbef', '#f8cfa2', '#cbe9c0', '#dadaeb', '#d9d9d9'],\r\n        colors9: ['#f44336', '#8bc34a', '#03a9f4', '#ffc107', '#e91e63', '#cddc39', '#00bcd4', '#ff9800', '#9c27b0', '#009688', '#f44336', '#8bc34a', '#03a9f4', '#ffc107', '#e91e63', '#cddc39', '#00bcd4', '#ff9800', '#9c27b0', '#009688']\r\n    },\r\n\r\n    render: function(node) {\r\n        this.$node = document.createElement('canvas');\r\n        this.$node.setAttribute('width', this.props.width);\r\n        this.$node.setAttribute('height', this.props.height);\r\n        this.$node.id = this.name;\r\n\r\n        dmx.dom.replace(node, this.$node);\r\n\r\n        if (typeof this.props.colors == 'string') {\r\n            this.props.colors = this.colors[this.props.colors] || this.colors.default;\r\n        }\r\n\r\n        this.datasets = this.getDatasets(node);\r\n\r\n        this.update({});\r\n    },\r\n\r\n    update: function(props) {\r\n        var that = this;\r\n        var chartType = this.props.type;\r\n        var options = {\r\n            type: chartType == 'area' ? 'line' : chartType,\r\n            options: {\r\n                responsive: this.props.responsive,\r\n                layout: { padding: 5 },\r\n                legend: { display: false },\r\n                tooltips: {\r\n                    callbacks: {\r\n                        label: function(tooltipItem, data) {\r\n                            var dataset = data.datasets[tooltipItem.datasetIndex];\r\n\r\n                            if (dataset.tooltipExpression) {\r\n                                return dmx.parse(dataset.tooltipExpression, new dmx.DataScope({\r\n                                    $label: dataset.label,\r\n                                    $value: dataset.data[tooltipItem.index]\r\n                                }, that));\r\n                            }\r\n\r\n                            if (chartType == 'doughnut' || chartType == 'pie') {\r\n                                var label = data.labels[tooltipItem.index];\r\n                                var value = ': ' + dataset.data[tooltipItem.index];\r\n\r\n                                if (Array.isArray(label)) {\r\n                                    label = label.slice();\r\n                                    label[0] += value;\r\n                                } else {\r\n                                    label += value;\r\n                                }\r\n\r\n                                return label;\r\n                            } else if (chartType == 'palarArea') {\r\n                                return data.labels[tooltipItem.index] + ': ' + tooltipItem.yLabel\r\n                            } else {\r\n                                var label = dataset.label || '';\r\n                                if (label) {\r\n                                    label += ': ';\r\n                                }\r\n                                \r\n                                var value = tooltipItem.value;\r\n                                if (value != null) {\r\n                                    label += value;\r\n                                } else {\r\n                                    label += tooltipItem.yLabel;\r\n                                }\r\n\r\n                                return label;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        if (typeof this.props.colors == 'string') {\r\n            this.props.colors = this.colors[this.props.colors] || this.colors.default;\r\n        }\r\n\r\n        if (this.props.noanimation) {\r\n            options.options.animation = { duration: 0 };\r\n            options.options.hover = { animationDuration: 0 };\r\n        }\r\n\r\n        if (this.props.legend) {\r\n            options.options.legend.display = true;\r\n            options.options.legend.position = this.props.legend;\r\n        }\r\n\r\n        if (this.props.type == 'line' || this.props.type == 'area') {\r\n            options.options.scales = {\r\n                xAxes: [{\r\n                    gridLines: { display: !this.props.nogrid },\r\n                    ticks: { callback: function(value, index, values) {\r\n                        var label = dmx.parse(that.props['label-x'], new dmx.DataScope({ $value: value, $index: index }, that));\r\n                        if (label != null) { return label };\r\n                        return value;\r\n                    }}\r\n                }],\r\n                yAxes: [{\r\n                    gridLines: { display: !this.props.nogrid },\r\n                    stacked: this.props.stacked,\r\n                    ticks: { beginAtZero: true, callback: function(value, index, values) {\r\n                        var label = dmx.parse(that.props['label-y'], new dmx.DataScope({ $value: value, $index: index }, that));\r\n                        if (label != null) { return label };\r\n                        return value;\r\n                    }}\r\n                }]\r\n            };\r\n\r\n            this.datasets.forEach(function(dataset, i) {\r\n                var color = this.props.colors[i];\r\n\r\n                Object.assign(dataset, {\r\n                    fill: this.props.type == 'area',\r\n                    lineTension: this.props.smooth ? 0.4 : 0,\r\n                    backgroundColor: Color(color).alpha(0.5).rgbaString(),\r\n                    borderWidth: +this.props.thickness,\r\n                    borderColor: color,\r\n                    borderDash: this.props.dashed ? [5,5] : [],\r\n                    pointStyle: this.props['point-style'],\r\n                    pointBackgroundColor: color,\r\n                    pointBorderColor: color,\r\n                    pointBorderWidth: 1,\r\n                    pointHitRadius: 10,\r\n                    pointRadius: this.props.points ? +this.props['point-size'] : 0,\r\n                    pointHoverRadius: +this.props['point-size']\r\n                });\r\n            }, this);\r\n        }\r\n\r\n        if (this.props.type == 'bar' || this.props.type == 'horizontalBar') {\r\n            options.options.scales = {\r\n                xAxes: [{\r\n                    gridLines: { display: !this.props.nogrid },\r\n                    stacked: this.props.stacked,\r\n                    ticks: { beginAtZero: true, callback: function(value, index, values) {\r\n                        var label = dmx.parse(that.props['label-x'], new dmx.DataScope({ $value: value, $index: index }, that));\r\n                        if (label != null) { return label };\r\n                        return value;\r\n                    }}\r\n                }],\r\n                yAxes: [{\r\n                    gridLines: { display: !this.props.nogrid },\r\n                    stacked: this.props.stacked,\r\n                    ticks: { beginAtZero: true, callback: function(value, index, values) {\r\n                        var label = dmx.parse(that.props['label-y'], new dmx.DataScope({ $value: value, $index: index }, that));\r\n                        if (label != null) { return label };\r\n                        return value;\r\n                    }}\r\n                }]\r\n            };\r\n\r\n            this.datasets.forEach(function(dataset, i) {\r\n                var color = this.props.colors[i];\r\n\r\n                Object.assign(dataset, {\r\n                    backgroundColor: this.props.multicolor ? this.props.colors.map(function(color) { return Color(color).alpha(0.5).rgbaString(); }) : Color(color).alpha(0.5).rgbaString(),\r\n                    borderColor: this.props.multicolor ? this.props.colors : color,\r\n                    borderDash: this.props.dashed ? [5,5] : [],\r\n                    borderWidth: +this.props.thickness,\r\n                    barPercentage: this.props.fullbar ? 1 : .9,\r\n                    categoryPercentage: this.props.fullbar ? 1 : .8\r\n                });\r\n            }, this);\r\n        }\r\n\r\n        if (this.props.type == 'polarArea' || this.props.type == 'radar') {\r\n            options.options.scale = { gridLines: { display: !this.props.nogrid }, ticks: { beginAtZero: true } };\r\n\r\n            this.datasets.forEach(function(dataset, i) {\r\n                var color = this.props.colors[i];\r\n\r\n                Object.assign(dataset, {\r\n                    fill: true,\r\n                    lineTension: this.props.smooth ? 0.4 : 0,\r\n                    borderWidth: +this.props.thickness,\r\n                    borderDash: this.props.dashed ? [5,5] : [],\r\n                    borderColor: this.props.type == 'polarArea' ? this.props.colors : color,\r\n                    backgroundColor: this.props.type == 'polarArea' ? this.props.colors.map(function(color) { return Color(color).alpha(0.3).rgbaString(); }) : Color(color).alpha(0.3).rgbaString(),\r\n                    pointStyle: this.props['point-style'],\r\n                    pointBackgroundColor: this.props.type == 'polarArea' ? this.props.colors : color,\r\n                    pointBorderColor: this.props.type == 'polarArea' ? this.props.colors : color,\r\n                    pointBorderWidth: 1,\r\n                    pointHitRadius: 10,\r\n                    pointRadius: this.props.points ? +this.props['point-size'] : 0,\r\n                    pointHoverRadius: +this.props['point-size']\r\n                });\r\n            }, this);\r\n        }\r\n\r\n        if (this.props.type == 'pie' || this.props.type == 'doughnut') {\r\n          this.datasets.forEach(function(dataset, i) {\r\n              var color = this.props.colors[i];\r\n\r\n              Object.assign(dataset, {\r\n                  backgroundColor: this.props.colors.map(function(color) { return Color(color).alpha(0.5).rgbaString() }),\r\n                  borderColor: this.props.colors,\r\n                  borderWidth: +this.props.thickness,\r\n              });\r\n          }, this);\r\n        }\r\n\r\n        if (this.props.type == 'doughnut') {\r\n            options.options.cutoutPercentage = this.props.cutout;\r\n        }\r\n\r\n        if (JSON.stringify(options) != JSON.stringify(this.options)) {\r\n            if (this.props.type) {\r\n                this.options = dmx.clone(options);\r\n\r\n                options.data = this.getData();\r\n\r\n                if (this.chart) this.chart.destroy();\r\n                this.chart = new Chart(this.$node, dmx.clone(options));\r\n            }\r\n        } else if (this.chart) {\r\n            var data = this.getData();\r\n            var needUpdate = false;\r\n\r\n            if (JSON.stringify(this.chart.data.labels) != JSON.stringify(data.labels)) {\r\n                this.chart.data.labels = data.labels;\r\n                needUpdate = true;\r\n            }\r\n\r\n            if (data.datasets.length != this.chart.data.datasets.length) {\r\n                this.chart.data.datasets = data.datasets;\r\n                needUpdate = true;\r\n            } else {\r\n                data.datasets.forEach(function(dataset, i) {\r\n                    ['label', 'backgroundColor', 'borderColor', 'borderWidth', 'dataExpression', 'tooltipExpression', 'data'].forEach(function(prop) {\r\n                        if (JSON.stringify(this.chart.data.datasets[i][prop]) != JSON.stringify(dataset[prop])) {\r\n                            this.chart.data.datasets[i][prop] = dataset[prop];\r\n                            needUpdate = true;\r\n                        }\r\n                    }, this);\r\n                }, this);\r\n            }\r\n\r\n            if (needUpdate) {\r\n                this.chart.update();\r\n            }\r\n        }\r\n    },\r\n\r\n    getDatasets: function(node) {\r\n        var datasets = [];\r\n\r\n        for (var i = 1; i <= 20; i++) {\r\n            if (node.hasAttribute('dataset-' + i + ':value')) {\r\n                datasets.push({\r\n                    label: node.hasAttribute('dataset-' + i + ':label') ? node.getAttribute('dataset-' + i + ':label') : 'dataset ' + i,\r\n                    backgroundColor: this.props.colors.map(function(color) { return Color(color).alpha(0.5).rgbaString() }),\r\n                    borderColor: this.props.colors,\r\n                    borderWidth: 1,\r\n                    dataExpression: node.getAttribute('dataset-' + i + ':value'),\r\n                    tooltipExpression: node.getAttribute('dataset-' + i + ':tooltip'),\r\n                    data: []\r\n                });\r\n            }\r\n        }\r\n\r\n        return datasets;\r\n    },\r\n\r\n    getData: function() {\r\n        this.datasets.map(function(dataset) {\r\n            var items = dmx.repeatItems(this.props.data);\r\n\r\n            dataset.data = items.map(function(data) {\r\n                return +dmx.parse(dataset.dataExpression, new dmx.DataScope(data, this));\r\n            }, this);\r\n\r\n            return [];\r\n        }, this);\r\n\r\n        return {\r\n            labels: this.getLabels(),\r\n            datasets: this.datasets\r\n        };\r\n    },\r\n\r\n    getLabels: function() {\r\n        var items = dmx.repeatItems(this.props.data);\r\n\r\n        return items.map(function(data, index) {\r\n            if (this.props.labels) {\r\n                return dmx.parse(this.props.labels, new dmx.DataScope(data, this));\r\n            } else {\r\n                return 'value ' + (index + 1);\r\n            }\r\n        }, this);\r\n    }\r\n\r\n});\r\n"]}